<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/64d8096832.js" crossorigin="anonymous"></script>
    <title>The Home Depot: sign in, create account</title>
    <link rel = "icon" href ="https://assets.homedepot-static.com/single-signin-ui/0.557.0/build/7b4c51f66559b768081eabf61db98f2d.svg" type = "image/x-icon">
    <link rel="stylesheet" href="/style/register.css">
</head>
<style>
    
</style>
<body>
    <div id="mdiv">
        <div>
            <img style="cursor: pointer;" src="https://assets.homedepot-static.com/single-signin-ui/0.557.0/build/7b4c51f66559b768081eabf61db98f2d.svg"/>
            <p style="font-size:23px;line-height:2px;font-weight:bold">Create an Account</p>
        </div>
        <div id="fdiv">
            <form>
                <p style="color:rgb(118,188,235);cursor: pointer"><i class="fas fa-chevron-left"> </i> Back</p>
                <label>Email Address</label>
                <br>
                <input type="text" id="username">
                <p class="info" id="iemail"></p>
                <label>Password</label>
                <br>
                <input type="password" id="password">
                <p class="info" id="ipass"></p>
                <div id="phelp"></div>
                <label>Zip Code</label>
                <br>
                <input type="number" id="zip">
                <p class="info" id="izip"></p>
                <label>Phone</label>
                <br>
                <input type="number" id="mobile">
                <p id="imob" class="info"></p>
            </form>
            <div style="cursor: pointer">
                <input type="checkbox" id="cbx1" name="cbx1" style="cursor: pointer">
                <label for="cbx1" style="cursor: pointer">Keep me Signed in</label>
                
            </div>
            <div style="cursor: pointer">
                
                <input type="checkbox" id="cbx2" name="cbx2" style="cursor: pointer" >
                <label for="cbx2" style="cursor: pointer">Verify my mobile number via text message or phone call</label><br>
                
            </div>
            <button>Create an Account</button>
        </div>
        <div id="ldiv">
            <p>Already Have an Account? <a href="login.html"> Sign In</a></p>
            <p>By selecting 'Create an Account' you are agreeing to the Pro Xtra Terms and Conditions, Privacy and Security Statement, & My Account Terms and Conditions.</p>
        </div>
    </div>
</body>
</html>
<script>

    document.querySelector("button").addEventListener("click", register);


    function register(){
        let nt=true;
        let pt=true;
        let ut=true;
        let mt=true;

        let name=document.querySelector("#zip").value;
        let password=document.querySelector("#password").value;
        let username=document.querySelector("#username").value;
        let mobile=document.querySelector("#mobile").value;

        let cbx1=document.querySelector("#cbx1").value;
        let cbx2=document.querySelector("#cbx2").value;

        if(name.length<5){
            document.querySelector("#izip").textContent="Please enter a valid 5-digit ZIP Code.";
            nt=false;
        }
        if(password.length<9){
            document.querySelector("#ipass").textContent="Please add a password.";
            pt=false;
        }
        if(mobile.length<10){
            document.querySelector("#imob").textContent="Phone numbers must be 10 digits.";
            mt=false;
        }
        if(username.length<1){
            document.querySelector("#iemail").textContent="Please provide your email address.";
            ut=false;
        }




        let rdata={
            name:name,
            email:" ",
            password:password,
            username:username,
            mobile:mobile,
            description:" "
        };


        if(ut==true && pt==true &&  nt==true && mt==true){
            fefun(rdata)
        }
        
    }

    async function fefun(rdata){
        rdata=JSON.stringify(rdata);

        console.log(rdata);

        let url=`https://masai-api-mocker.herokuapp.com/auth/register`;

        let res=await fetch (url,{
            method:"POST",

            body:rdata,

            headers:{
                "Content-Type":"application/json",
            },
        });

        let data= await res.json();

        console.log(data.message);
        if(data.message=="Registration failed, user already exists"){
            alert("Registration failed, user already exists")
        }
    }



















</script>